import os
import logging
from logging.handlers import RotatingFileHandler
from datetime import datetime

def setup_logging(config):
    """
    Configure logging based on configuration
    
    :param config: Configuration dictionary
    """
    # Create logs directory if it doesn't exist
    log_dir = config['paths'].get('log_dir', 'logs')
    os.makedirs(log_dir, exist_ok=True)

    # Generate log filename with timestamp
    timestamp = datetime.now().strftime("%Y%m%d")
    log_filename = os.path.join(log_dir, f"document_classification_{timestamp}.log")

    # Configure logging
    log_level = getattr(logging, config['logging'].get('level', 'INFO').upper())
    log_format = config['logging'].get('format', '%(asctime)s - %(name)s - %(levelname)s - %(message)s')

    # Configure root logger
    logging.basicConfig(
        level=log_level,
        format=log_format,
        handlers=[
            # File handler with rotation
            RotatingFileHandler(
                log_filename, 
                maxBytes=10*1024*1024,  # 10 MB
                backupCount=5
            ),
            # Console handler
            logging.StreamHandler()
        ]
    )

def get_logger(name=None):
    """
    Get a logger with optional name
    
    :param name: Name of the logger (optional)
    :return: Configured logger
    """
    return logging.getLogger(name or __name__)

# Global logger for easy access
logger = get_logger()


----
import json
from logger_config import setup_logging, get_logger
from azure_keyvault import load_config_with_keyvault

logger = get_logger()

def load_config(config_path):
    """
    Load configuration file with Azure Key Vault support
    
    :param config_path: Path to the configuration file
    :return: Processed configuration dictionary
    """
    try:
        # Load configuration
        config = load_config_with_keyvault(config_path)
        
        # Setup logging based on configuration
        setup_logging(config)
        
        return config
    except Exception as e:
        logger.error(f"Failed to load configuration: {e}")
        raise



----


from logger_config import get_logger

# This will automatically use the module name as the logger name
logger = get_logger()

# Now use logger instead of logging
logger.info("This is an info message")
logger.error("This is an error message")
logger.warning("This is a warning message")


----

{
    "paths": {
        "log_dir": "/path/to/logs"
    },
    "logging": {
        "level": "INFO",
        "format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
    }
}

