fields

    First_Name
    Last_Name
    Email
    Cell
    Birth Date
    Birth Place
    Birth City
    Birth State/Provence
    Birth Country
    Citizenship
    Degree
    Gender
    SSN
    LicenseNumber (under State License)
    License_State (under State License)
    Expiration Date (under State License)
    LicenseNumber (under DEA License)
    License_State (under DEA License)
    Expiration Date (under DEA License)
    LicenseNumber (under CDS License)
    License_State (under CDS License)
    Expiration Date (under CDS License)
    Type(under Other Credentials)
    State(under Other Credentials)
    Expiration Date (under Other Credentials)
    Name (Under Board Certification)
    Specialty (Under Board Certification)


-------------------------


  prompt.py

  {
  "azure_blob": {
    "connection_string": "YOUR_BLOB_CONNECTION_STRING",
    "inputcontainer": "inputcontainer",
    "outputcontainer": "outputcontainer"
  },
  "azure_document_intelligence": {
    "endpoint": "YOUR_DOC_INTEL_ENDPOINT",
    "key": "YOUR_DOC_INTEL_KEY"
  },
  "azure_openai_gpt": {
    "endpoint": "YOUR_OPENAI_ENDPOINT",
    "api_key": "YOUR_OPENAI_KEY",
    "api_version": "2024-02-01",
    "deployment_name": "gpt-4o"
  },
  "azure_openai_embedding": {
    "endpoint": "YOUR_OPENAI_ENDPOINT",
    "api_key": "YOUR_OPENAI_KEY",
    "api_version": "2024-02-01",
    "deployment_name": "text-embedding-3-large",
    "dimension": 3072
  },
  "azure_search": {
    "endpoint": "YOUR_SEARCH_ENDPOINT",
    "api_key": "YOUR_SEARCH_KEY",
    "index_strategy": "universal",
    "universal_index_name": "documents_universal",
    "auto_delete_days": 30,
    "enable_auto_cleanup": true
  },
  "extraction": {
    "fields": [
      "first_name",
      "last_name",
      "email",
      "cell",
      "birth_date",
      "birth_place",
      "birth_city",
      "birth_state_province",
      "birth_country",
      "citizenship",
      "degree",
      "gender",
      "ssn",
      "state_license_number",
      "state_license_state",
      "state_license_expiration",
      "dea_license_number",
      "dea_license_state",
      "dea_license_expiration",
      "cds_license_number",
      "cds_license_state",
      "cds_license_expiration",
      "other_credential_type",
      "other_credential_state",
      "other_credential_expiration",
      "board_cert_name",
      "board_cert_specialty"
    ],
    "confidence_threshold": 0.50,
    "min_text_length": 10,
    "na_value": "NA"
  },
  "rag": {
    "mode": "text",
    "top_k": 3,
    "similarity_threshold": 0.70,
    "chunk_size": 1000,
    "chunk_overlap": 200,
    "max_chunks_per_doc": 5
  },
  "costs": {
    "ocr_per_page": 0.01,
    "embedding_per_1k_tokens": 0.0001,
    "gpt4o_input_per_1k_tokens": 0.0025,
    "gpt4o_output_per_1k_tokens": 0.01
  },
  "processing": {
    "max_doc_length_chars": 12000,
    "max_prompt_tokens": 7000,
    "batch_size": 10,
    "enable_chunking": true,
    "enable_logging": true
  }
}

  ------

  """
MEDICAL CREDENTIALS FIELD LIBRARY
==================================

Complete field definitions for medical professional credentials
including personal info, licenses (State, DEA, CDS), and board certifications.

27 fields total - optimized for healthcare provider credentialing documents
"""

# =============================================================================
# FIELD LIBRARY - ALL 27 FIELDS
# =============================================================================

FIELD_LIBRARY = {
    # =========================================================================
    # PERSONAL INFORMATION (1-12)
    # =========================================================================
    
    "first_name": {
        "description": "First/Given name of the individual",
        "examples": ["John", "Mary", "Robert", "Jennifer"],
        "format": "Capitalized text, may include middle initial",
        "extraction_hints": [
            "Look for 'First Name', 'Given Name', 'Name' section",
            "Usually at top of form or in personal info section",
            "May be split from last name or in 'Full Name' field",
            "If not found, return 'NA'"
        ]
    },
    
    "last_name": {
        "description": "Last/Family name of the individual",
        "examples": ["Smith", "Johnson", "Williams", "Brown"],
        "format": "Capitalized text, may include suffixes (Jr., Sr., III)",
        "extraction_hints": [
            "Look for 'Last Name', 'Surname', 'Family Name'",
            "Usually follows first name in personal info",
            "May include suffixes like Jr., Sr., MD, DO",
            "If not found, return 'NA'"
        ]
    },
    
    "email": {
        "description": "Email address",
        "examples": ["john.doe@hospital.com", "mary.smith@clinic.org"],
        "format": "Standard email format: username@domain.com",
        "extraction_hints": [
            "Look for 'Email', 'E-mail', 'Email Address'",
            "Must contain @ symbol and domain",
            "Validate format if possible",
            "If not found, return 'NA'"
        ]
    },
    
    "cell": {
        "description": "Cell/Mobile phone number",
        "examples": ["(555) 123-4567", "555-123-4567", "5551234567"],
        "format": "10 digits, may include formatting: (XXX) XXX-XXXX",
        "extraction_hints": [
            "Look for 'Cell', 'Mobile', 'Cell Phone', 'Mobile Number'",
            "Extract 10-digit number, preserve formatting if present",
            "May be labeled as 'Primary Phone' or 'Contact Number'",
            "If not found, return 'NA'"
        ]
    },
    
    "birth_date": {
        "description": "Date of birth",
        "examples": ["01/15/1985", "1985-01-15", "January 15, 1985"],
        "format": "MM/DD/YYYY or YYYY-MM-DD or Month DD, YYYY",
        "extraction_hints": [
            "Look for 'DOB', 'Date of Birth', 'Birth Date', 'Born'",
            "Convert to consistent format: MM/DD/YYYY",
            "Validate date is reasonable (person is 18-100 years old)",
            "If not found, return 'NA'"
        ]
    },
    
    "birth_place": {
        "description": "Complete birth place (city, state, country)",
        "examples": ["New York, NY, USA", "London, UK", "Toronto, ON, Canada"],
        "format": "City, State/Province, Country",
        "extraction_hints": [
            "Look for 'Place of Birth', 'Birth Place', 'Born in'",
            "May be combined field or separate fields",
            "Include all location details available",
            "If not found, return 'NA'"
        ]
    },
    
    "birth_city": {
        "description": "City of birth",
        "examples": ["New York", "Los Angeles", "Chicago", "Houston"],
        "format": "City name",
        "extraction_hints": [
            "Look for 'Birth City', 'City of Birth', or parse from birth_place",
            "Extract city portion from full birth place if available",
            "If not found, return 'NA'"
        ]
    },
    
    "birth_state_province": {
        "description": "State or Province of birth",
        "examples": ["California", "CA", "New York", "NY", "Ontario", "ON"],
        "format": "Full state name or 2-letter abbreviation",
        "extraction_hints": [
            "Look for 'Birth State', 'State/Province of Birth'",
            "May be full name or abbreviation",
            "Extract from birth_place if available",
            "If not found, return 'NA'"
        ]
    },
    
    "birth_country": {
        "description": "Country of birth",
        "examples": ["USA", "United States", "Canada", "United Kingdom"],
        "format": "Full country name or standard abbreviation",
        "extraction_hints": [
            "Look for 'Birth Country', 'Country of Birth'",
            "May be full name (United States) or abbreviation (USA)",
            "Extract from birth_place if available",
            "If not found, return 'NA'"
        ]
    },
    
    "citizenship": {
        "description": "Citizenship/Nationality",
        "examples": ["US Citizen", "Canadian", "Permanent Resident", "USA"],
        "format": "Country name or citizenship status",
        "extraction_hints": [
            "Look for 'Citizenship', 'Nationality', 'Citizen of'",
            "May indicate status: 'US Citizen', 'Permanent Resident'",
            "Different from birth country (naturalization possible)",
            "If not found, return 'NA'"
        ]
    },
    
    "degree": {
        "description": "Highest educational degree",
        "examples": ["MD", "DO", "PhD", "DDS", "PharmD", "RN", "BSN"],
        "format": "Degree abbreviation or full name",
        "extraction_hints": [
            "Look for 'Degree', 'Education', 'Qualification'",
            "Common medical degrees: MD, DO, DDS, PharmD, RN, PA",
            "May be in credentials section or after name",
            "If not found, return 'NA'"
        ]
    },
    
    "gender": {
        "description": "Gender/Sex",
        "examples": ["Male", "Female", "M", "F"],
        "format": "Male/Female or M/F",
        "extraction_hints": [
            "Look for 'Gender', 'Sex', 'M/F'",
            "May be checkbox, single letter, or full word",
            "Standardize to full word if possible",
            "If not found, return 'NA'"
        ]
    },
    
    "ssn": {
        "description": "Social Security Number (last 4 digits usually)",
        "examples": ["XXX-XX-1234", "1234", "***-**-1234"],
        "format": "Usually last 4 digits: XXXX or XXX-XX-XXXX",
        "extraction_hints": [
            "Look for 'SSN', 'Social Security', 'SS#'",
            "Often only last 4 digits shown for privacy",
            "Format: XXX-XX-XXXX or just last 4",
            "Handle masked values (***-**-1234)",
            "If not found, return 'NA'"
        ]
    },
    
    # =========================================================================
    # STATE LICENSE (14-16)
    # =========================================================================
    
    "state_license_number": {
        "description": "State medical license number",
        "examples": ["A12345", "MD123456", "123456-A", "NY-123456"],
        "format": "Alphanumeric, format varies by state",
        "extraction_hints": [
            "Look in 'State License' or 'Medical License' section",
            "May be labeled 'License Number', 'License #', 'State Lic #'",
            "Format varies by state (letters, numbers, or both)",
            "Primary medical license for practicing",
            "If not found, return 'NA'"
        ]
    },
    
    "state_license_state": {
        "description": "State that issued the medical license",
        "examples": ["CA", "California", "NY", "New York", "TX"],
        "format": "State abbreviation or full name",
        "extraction_hints": [
            "Look in 'State License' section for 'State', 'Issued by'",
            "Usually 2-letter abbreviation (CA, NY, TX)",
            "May be full state name",
            "If not found, return 'NA'"
        ]
    },
    
    "state_license_expiration": {
        "description": "Expiration date of state medical license",
        "examples": ["12/31/2025", "2025-12-31", "December 31, 2025"],
        "format": "MM/DD/YYYY or YYYY-MM-DD",
        "extraction_hints": [
            "Look in 'State License' section for 'Expiration', 'Exp Date'",
            "Convert to consistent format: MM/DD/YYYY",
            "Must be future date (not expired)",
            "If not found, return 'NA'"
        ]
    },
    
    # =========================================================================
    # DEA LICENSE (17-19)
    # =========================================================================
    
    "dea_license_number": {
        "description": "DEA (Drug Enforcement Administration) registration number",
        "examples": ["AB1234563", "FD1234567", "BD9876543"],
        "format": "2 letters + 7 digits (9 characters total)",
        "extraction_hints": [
            "Look in 'DEA License' or 'DEA Registration' section",
            "Format: 2 letters followed by 7 numbers (AB1234563)",
            "First letter indicates registrant type (A=pharmacy, B=hospital, F=practitioner)",
            "Required for prescribing controlled substances",
            "If not found, return 'NA'"
        ]
    },
    
    "dea_license_state": {
        "description": "State associated with DEA registration",
        "examples": ["CA", "NY", "TX", "Florida", "Illinois"],
        "format": "State abbreviation or full name",
        "extraction_hints": [
            "Look in 'DEA License' section for 'State'",
            "Usually same as practice state",
            "If not found, return 'NA'"
        ]
    },
    
    "dea_license_expiration": {
        "description": "DEA registration expiration date",
        "examples": ["06/30/2026", "2026-06-30", "June 30, 2026"],
        "format": "MM/DD/YYYY or YYYY-MM-DD",
        "extraction_hints": [
            "Look in 'DEA License' section for 'Expiration', 'Renewal Date'",
            "DEA renewals are typically every 3 years",
            "Convert to consistent format: MM/DD/YYYY",
            "If not found, return 'NA'"
        ]
    },
    
    # =========================================================================
    # CDS LICENSE (20-22)
    # =========================================================================
    
    "cds_license_number": {
        "description": "CDS (Controlled Dangerous Substances) license number",
        "examples": ["CDS123456", "123456-CDS", "C-123456"],
        "format": "Alphanumeric, format varies by state",
        "extraction_hints": [
            "Look in 'CDS License' or 'Controlled Substances' section",
            "State-level license for prescribing controlled substances",
            "Format varies by state",
            "Some states don't require separate CDS (use DEA only)",
            "If not found, return 'NA'"
        ]
    },
    
    "cds_license_state": {
        "description": "State that issued CDS license",
        "examples": ["MD", "Maryland", "NJ", "New Jersey"],
        "format": "State abbreviation or full name",
        "extraction_hints": [
            "Look in 'CDS License' section for 'State'",
            "Usually same as primary practice state",
            "Required in states like Maryland, New Jersey",
            "If not found, return 'NA'"
        ]
    },
    
    "cds_license_expiration": {
        "description": "CDS license expiration date",
        "examples": ["12/31/2025", "2025-12-31"],
        "format": "MM/DD/YYYY or YYYY-MM-DD",
        "extraction_hints": [
            "Look in 'CDS License' section for 'Expiration'",
            "Renewal period varies by state",
            "Convert to consistent format: MM/DD/YYYY",
            "If not found, return 'NA'"
        ]
    },
    
    # =========================================================================
    # OTHER CREDENTIALS (23-25)
    # =========================================================================
    
    "other_credential_type": {
        "description": "Type of additional credential/certification",
        "examples": ["ACLS", "BLS", "PALS", "NRP", "ATLS", "Board Certification"],
        "format": "Credential name or abbreviation",
        "extraction_hints": [
            "Look in 'Other Credentials', 'Certifications', 'Additional Licenses'",
            "Common: ACLS, BLS, PALS (life support certifications)",
            "May be specialty certifications, hospital privileges",
            "List primary/most important if multiple",
            "If not found, return 'NA'"
        ]
    },
    
    "other_credential_state": {
        "description": "State associated with other credential (if applicable)",
        "examples": ["CA", "National", "NY", "Multi-State"],
        "format": "State abbreviation, 'National', or 'Multi-State'",
        "extraction_hints": [
            "Some credentials are national (ACLS, BLS)",
            "Some are state-specific",
            "May say 'National' or 'All States'",
            "If not found, return 'NA'"
        ]
    },
    
    "other_credential_expiration": {
        "description": "Expiration date of other credential",
        "examples": ["03/31/2025", "2025-03-31"],
        "format": "MM/DD/YYYY or YYYY-MM-DD",
        "extraction_hints": [
            "Life support certs (ACLS, BLS) expire every 2 years",
            "Board certifications expire every 5-10 years",
            "Convert to consistent format: MM/DD/YYYY",
            "If not found, return 'NA'"
        ]
    },
    
    # =========================================================================
    # BOARD CERTIFICATION (26-27)
    # =========================================================================
    
    "board_cert_name": {
        "description": "Name of certifying board",
        "examples": [
            "American Board of Internal Medicine",
            "ABIM",
            "American Board of Surgery",
            "American Board of Family Medicine"
        ],
        "format": "Full board name or standard abbreviation",
        "extraction_hints": [
            "Look in 'Board Certification' section",
            "Usually starts with 'American Board of...'",
            "May be abbreviated (ABIM, ABS, ABFM)",
            "Indicates specialist certification",
            "If not found, return 'NA'"
        ]
    },
    
    "board_cert_specialty": {
        "description": "Medical specialty certified by board",
        "examples": [
            "Internal Medicine",
            "Surgery",
            "Family Medicine",
            "Pediatrics",
            "Emergency Medicine",
            "Cardiology"
        ],
        "format": "Specialty name",
        "extraction_hints": [
            "Look in 'Board Certification' section under 'Specialty'",
            "Common specialties: Internal Medicine, Surgery, Pediatrics",
            "Subspecialties: Cardiology, Gastroenterology, etc.",
            "May list primary specialty if multiple certifications",
            "If not found, return 'NA'"
        ]
    }
}

# =============================================================================
# SYSTEM PROMPT CONFIGURATION
# =============================================================================

SYSTEM_PROMPT_CONFIG = {
    "role": "You are an expert medical credentialing specialist with years of experience extracting information from healthcare provider documents. You have deep knowledge of medical licenses, DEA registrations, board certifications, and credential verification.",
    
    "extraction_rules": [
        "Extract EXACTLY what you see in the document - do not infer or guess",
        "If a field is not present or cannot be found with confidence, use 'NA'",
        "For dates, convert to MM/DD/YYYY format when possible",
        "For states, you may use either full name or 2-letter abbreviation",
        "Preserve original formatting for license numbers (letters, numbers, hyphens)",
        "Return 'NA' for ANY field you cannot find or are uncertain about",
        "Do not leave any field empty - use 'NA' for missing values",
        "Pay special attention to license sections: State License, DEA License, CDS License",
        "Board certifications are usually in a separate section from licenses"
    ],
    
    "confidence_guide": {
        "0.95-1.00": "Exact match found, clear and unambiguous",
        "0.85-0.94": "Strong match, minor formatting differences",
        "0.70-0.84": "Likely match, some interpretation needed",
        "0.50-0.69": "Possible match, moderate uncertainty",
        "below 0.50": "Field not found or too uncertain - use 'NA'"
    },
    
    "output_format": """
Return a JSON object with ALL 27 fields. For each field provide:
{
  "field_name": {
    "value": "extracted value or 'NA'",
    "confidence": 0.XX
  }
}

CRITICAL: Return 'NA' with appropriate confidence for any field not found.
""",
    
    "restrictions": "Return ONLY the JSON object. No additional text, explanations, or markdown formatting."
}

# =============================================================================
# DOCUMENT TYPE HINTS
# =============================================================================

DOCUMENT_TYPE_HINTS = {
    "medical_credentials": {
        "title": "MEDICAL CREDENTIALING DOCUMENT",
        "special_considerations": [
            "These documents contain sensitive PHI (Protected Health Information)",
            "License sections are usually clearly labeled: State License, DEA, CDS",
            "Board certifications appear in separate section from licenses",
            "Multiple licenses possible (multi-state practice)",
            "Some fields may be intentionally masked for privacy (SSN)",
            "Expiration dates are critical - verify they are future dates",
            "DEA numbers follow specific format: 2 letters + 7 digits",
            "Use 'NA' for any field not applicable or not found"
        ]
    }
}

# =============================================================================
# RAG PROMPT TEMPLATES
# =============================================================================

RAG_PROMPT_TEMPLATE = {
    "intro": "You have access to {num_docs} similar credential documents that have been successfully processed. Learn from their extraction patterns.",
    
    "example_header": "SIMILAR DOCUMENTS AND THEIR EXTRACTIONS:",
    
    "transition": "Now extract from the CURRENT document using the same careful approach:",
    
    "instructions": [
        "Follow the same extraction patterns shown in the examples above",
        "Return 'NA' for any field not found (as shown in examples)",
        "Maintain consistent date formatting: MM/DD/YYYY",
        "Match the confidence scoring approach from examples",
        "Ensure all 27 fields are present in your response"
    ],
    
    "reminder": "Return ONLY the JSON object with all 27 fields. Use 'NA' for missing values."
}

STANDARD_PROMPT_TEMPLATE = {
    "header": "Extract the following fields from this medical credentialing document:",
    "reminder": "Return ONLY the JSON object with all 27 fields. Use 'NA' for any field not found."
}

# =============================================================================
# HELPER FUNCTIONS
# =============================================================================

def validate_medical_credential_fields():
    """Validate that all 27 fields are defined"""
    required_fields = [
        "first_name", "last_name", "email", "cell",
        "birth_date", "birth_place", "birth_city", "birth_state_province", "birth_country",
        "citizenship", "degree", "gender", "ssn",
        "state_license_number", "state_license_state", "state_license_expiration",
        "dea_license_number", "dea_license_state", "dea_license_expiration",
        "cds_license_number", "cds_license_state", "cds_license_expiration",
        "other_credential_type", "other_credential_state", "other_credential_expiration",
        "board_cert_name", "board_cert_specialty"
    ]
    
    missing = [f for f in required_fields if f not in FIELD_LIBRARY]
    
    if missing:
        print(f"❌ Missing field definitions: {missing}")
        return False
    
    print(f"✅ All 27 medical credential fields defined correctly")
    return True


def print_field_summary():
    """Print summary of all fields"""
    print("\n" + "="*80)
    print("MEDICAL CREDENTIALING FIELDS - 27 TOTAL")
    print("="*80)
    
    categories = [
        ("Personal Information (1-12)", [
            "first_name", "last_name", "email", "cell", "birth_date",
            "birth_place", "birth_city", "birth_state_province", 
            "birth_country", "citizenship", "degree", "gender", "ssn"
        ]),
        ("State License (14-16)", [
            "state_license_number", "state_license_state", "state_license_expiration"
        ]),
        ("DEA License (17-19)", [
            "dea_license_number", "dea_license_state", "dea_license_expiration"
        ]),
        ("CDS License (20-22)", [
            "cds_license_number", "cds_license_state", "cds_license_expiration"
        ]),
        ("Other Credentials (23-25)", [
            "other_credential_type", "other_credential_state", "other_credential_expiration"
        ]),
        ("Board Certification (26-27)", [
            "board_cert_name", "board_cert_specialty"
        ])
    ]
    
    for category_name, fields in categories:
        print(f"\n{category_name}:")
        for field in fields:
            info = FIELD_LIBRARY[field]
            print(f"  • {field}: {info['description']}")
    
    print("\n" + "="*80)


# Run validation if executed directly
if __name__ == "__main__":
    print("="*80)
    print("MEDICAL CREDENTIAL FIELD LIBRARY - VALIDATION")
    print("="*80)
    
    # Validate
    is_valid = validate_medical_credential_fields()
    
    if is_valid:
        # Print summary
        print_field_summary()
        
        # Test field access
        print("\nSample Field (first_name):")
        print(f"  Description: {FIELD_LIBRARY['first_name']['description']}")
        print(f"  Examples: {FIELD_LIBRARY['first_name']['examples']}")
        print(f"  Format: {FIELD_LIBRARY['first_name']['format']}")
        
        print("\n✅ Medical credential field library is ready!")
    else:
        print("\n❌ Validation failed!")
