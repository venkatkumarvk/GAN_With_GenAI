# Add sidebar with confidence selection
st.sidebar.title("Options")

# Get file counts for both confidence levels
high_confidence_source_blobs = list_blobs_with_prefix(
    blob_service_client, 
    container_name, 
    config["high_confidence_source_prefix"]
)
low_confidence_source_blobs = list_blobs_with_prefix(
    blob_service_client, 
    container_name, 
    config["low_confidence_source_prefix"]
)

# Count PDF files only
high_confidence_count = len([blob for blob in high_confidence_source_blobs if blob.name.lower().endswith('.pdf')])
low_confidence_count = len([blob for blob in low_confidence_source_blobs if blob.name.lower().endswith('.pdf')])

# Create options with counts
confidence_options = ["high_confidence", "low_confidence"]
confidence_labels = [
    f"High Confidence ({high_confidence_count} files)",
    f"Low Confidence ({low_confidence_count} files)"
]

confidence_selection = st.sidebar.radio(
    "Select Confidence Level",
    confidence_options,
    format_func=lambda x: confidence_labels[confidence_options.index(x)],
    index=confidence_options.index(st.session_state.confidence_selection)
)
